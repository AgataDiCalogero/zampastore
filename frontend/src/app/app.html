<p-toast key="app" position="top-right">
  <ng-template pTemplate="message" let-message>
    <div class="toast-content">
      <div class="toast-text">
        <div class="toast-summary">{{ message.summary }}</div>
        <div class="toast-detail">{{ message.detail }}</div>
      </div>
      @if (message?.data?.actionLabel) {
      <button
        pButton
        type="button"
        class="p-button-text p-button-sm"
        (click)="message.data.action()"
      >
        {{ message.data.actionLabel }}
      </button>
      }
    </div>
  </ng-template>
</p-toast>

<header class="app-header">
  <p-menubar [model]="[]" class="app-menubar">
    <ng-template pTemplate="start">
      <a
        class="brand"
        [routerLink]="['/']"
        aria-label="Vai alla home ZampaStore"
      >
        <i class="pi pi-heart"></i>
        <span>ZampaStore</span>
      </a>
      <nav class="desktop-nav" aria-label="Navigazione principale">
        @for (link of desktopLinks(); track link.label) {
          @if (link.routerLink) {
            <a
              class="desktop-nav-link"
              [class.desktop-nav-link--cta]="link.id === 'auth'"
              [routerLink]="link.routerLink"
            >
              @if (link.icon) {
                <i class="{{ link.icon }}"></i>
              }
              <span>{{ link.label }}</span>
            </a>
          } @else {
            <button
              type="button"
              class="desktop-nav-link"
              [class.desktop-nav-link--cta]="link.id === 'auth'"
              (click)="handleMobileAction(link.command)"
            >
              @if (link.icon) {
                <i class="{{ link.icon }}"></i>
              }
              <span>{{ link.label }}</span>
            </button>
          }
        }
      </nav>
    </ng-template>
    <ng-template pTemplate="end">
      <div class="menubar-meta">
        <span>
          <i class="pi pi-truck"></i>
          Consegna 24/48h
        </span>
        <span>
          <i class="pi pi-undo"></i>
          Resi facili
        </span>
        <span>
          <i class="pi pi-lock"></i>
          Pagamenti sicuri
        </span>
      </div>
      <button
        pButton
        type="button"
        class="p-button-text mobile-toggle"
        icon="pi pi-bars"
        aria-label="Apri menu"
        (click)="toggleMobileMenu()"
      ></button>
    </ng-template>
  </p-menubar>
</header>

@if (mobileMenuOpen()) {
  <button
    type="button"
    class="mobile-nav-backdrop"
    aria-label="Chiudi menu"
    (click)="closeMobileMenu()"
  ></button>
<aside class="mobile-nav" role="dialog" aria-modal="true">
  <div class="mobile-nav-header">
    <span>Menu</span>
    <button
      pButton
      type="button"
      class="p-button-text"
      icon="pi pi-times"
      aria-label="Chiudi menu"
      (click)="closeMobileMenu()"
    ></button>
  </div>
    <nav class="mobile-nav-links">
      @for (link of mobileLinks(); track link.label) {
        @if (link.routerLink) {
          <a
            class="mobile-nav-link"
            [class.mobile-nav-link--cta]="link.id === 'auth'"
            [routerLink]="link.routerLink"
            (click)="closeMobileMenu()"
          >
            @if (link.icon) {
              <i class="{{ link.icon }}"></i>
            }
            <span>{{ link.label }}</span>
          </a>
        } @else {
          <button
            type="button"
            class="mobile-nav-button"
            [class.mobile-nav-button--cta]="link.id === 'auth'"
            (click)="handleMobileAction(link.command)"
          >
            @if (link.icon) {
              <i class="{{ link.icon }}"></i>
            }
            <span>{{ link.label }}</span>
          </button>
        }
      }
    </nav>
  </aside>
}

<main class="app-content">
  <div class="page">
    <div class="container">
      <router-outlet></router-outlet>
    </div>
  </div>
</main>

<footer class="app-footer">
  <div class="container footer-content">
    <div>
      <strong>ZampaStore</strong>
      <p class="text-muted">Benessere quotidiano per cani e gatti.</p>
    </div>
    <div class="footer-links">
      <span>Â© 2026 ZampaStore</span>
      <span>Assistenza clienti 7 giorni su 7</span>
    </div>
  </div>
</footer>

@if (state$ | async; as state) { @if (state.status === 'ready') {
<section class="product-list">
  <div class="product-grid">
    @for (product of state.products; track product.id) {
    <app-product-card
      [product]="product"
      (addToCart)="addToCart($event)"
    ></app-product-card>
    }
  </div>
</section>
} @else if (state.status === 'empty') {
<section class="product-empty">
  <div class="empty-state">
    <i class="pi pi-box"></i>
    <h3>Nessun prodotto disponibile</h3>
    <p>Stiamo aggiornando il catalogo. Torna tra poco.</p>
  </div>
</section>
} @else if (state.status === 'error') {
<section class="product-empty">
  <div class="empty-state">
    <i class="pi pi-exclamation-triangle"></i>
    <h3>Errore nel caricamento</h3>
    <p>Riprova pi√π tardi.</p>
  </div>
</section>
} @else {
<section class="product-list">
  <div class="product-grid">
    @for (item of skeletonItems; track $index) {
    <div class="product-card-skeleton">
      <p-skeleton width="70%" height="22px"></p-skeleton>
      <p-skeleton height="180px"></p-skeleton>
      <p-skeleton width="35%" height="20px"></p-skeleton>
      <div class="product-card-actions">
        <p-skeleton width="120px" height="36px"></p-skeleton>
        <p-skeleton width="160px" height="36px"></p-skeleton>
      </div>
    </div>
    }
  </div>
</section>
} }

@if (state$ | async; as state) { @if (state.status === 'ready') {
<section class="orders-page">
  <p-card header="I miei ordini" class="orders-card">
    <p-table [value]="state.orders" dataKey="id" responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr>
          <th scope="col">Ordine</th>
          <th scope="col">Data</th>
          <th scope="col">Totale</th>
          <th scope="col">Stato</th>
          <th scope="col">Azioni</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-order>
        <tr>
          <td>{{ order.id }}</td>
          <td>{{ order.createdAt | date: 'dd/MM/yyyy' }}</td>
          <td>{{ order.totalCents / 100 | number: '1.2-2' }} â‚¬</td>
          <td>
            <span
              class="status-chip"
              [class]="'status-chip status-' + statusFor(order.status).tone"
            >
              {{ statusFor(order.status).label }}
            </span>
          </td>
          <td>
            <button
              pButton
              type="button"
              class="p-button-secondary orders-detail-button"
              [routerLink]="['/ordini', order.id]"
            >
              Dettagli
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
</section>
} @else if (state.status === 'empty') {
<section class="orders-empty">
  <div class="empty-state">
    <i class="pi pi-inbox"></i>
    <h3>Non hai ancora ordini</h3>
    <p>Quando completerai un acquisto, lo vedrai qui.</p>
    <button pButton type="button" [routerLink]="['/prodotti']">
      Vai al catalogo
    </button>
  </div>
</section>
} @else if (state.status === 'error') {
<section class="orders-empty">
  <div class="empty-state">
    <i class="pi pi-exclamation-triangle"></i>
    <h3>Non riusciamo a caricare gli ordini</h3>
    <p>Riprova tra poco.</p>
  </div>
</section>
} @else {
<section class="orders-page">
  <p-card header="I miei ordini" class="orders-card">
    <div class="orders-skeleton">
      @for (row of skeletonRows; track $index) {
      <p-skeleton height="32px"></p-skeleton>
      }
    </div>
  </p-card>
</section>
} }

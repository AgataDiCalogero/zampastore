<p-card class="product-card" [header]="product.name">
  <ng-template pTemplate="content">
    <div
      class="product-card-media"
      [class.has-secondary]="secondaryImage && !secondaryImageError()"
    >
      @if (mainImage && !imageError()) {
      <img
        [src]="mainImage"
        [alt]="product.name"
        class="primary-image"
        loading="lazy"
        decoding="async"
        (error)="handleImageError()"
      />
      @if (secondaryImage && !secondaryImageError()) {
      <img
        [src]="secondaryImage"
        [alt]="product.name"
        class="secondary-image"
        loading="lazy"
        decoding="async"
        (error)="handleSecondaryImageError()"
      />
      } } @else {
      <div class="product-image-fallback">
        <i class="pi pi-image"></i>
        <span>{{ product.name }}</span>
      </div>
      }
    </div>
    @if (product.description) {
    <p class="product-card-description">{{ product.description }}</p>
    }
    <p class="product-card-price">
      {{ product.priceCents / 100 | number: '1.2-2' }} â‚¬
    </p>
  </ng-template>

  <ng-template pTemplate="footer">
    <div class="product-card-actions">
      <button
        pButton
        type="button"
        class="p-button-secondary product-card-button"
        icon="pi pi-eye"
        label="Dettagli"
        [routerLink]="['/prodotti', product.id]"
      ></button>
      <button
        pButton
        type="button"
        class="product-card-button"
        icon="pi pi-shopping-cart"
        label="Aggiungi"
        (click)="handleAddToCart()"
      ></button>
    </div>
  </ng-template>
</p-card>
